<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <meta name="description" content="这是邓万穿的个人网页。这里记录了我的学习与生活点滴。">
  <meta name="keywords" content="邓万穿, 前端, 留言板, 个人主页, 简历">
  <meta name="author" content="邓万穿">

  <title>邓万穿的个人主页</title>
  <!-- CSS -->
  <link rel="stylesheet" href="./css/main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Finger+Paint&family=Ma+Shan+Zheng&family=ZCOOL+KuaiLe&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=ZCOOL+KuaiLe&family=ZCOOL+XiaoWei&family=Gaegu&family=Hi+Melody&display=swap" rel="stylesheet">
  <!-- Third-party libs -->
  <script src="https://fastly.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="https://lib.baomitu.com/marked/4.0.2/marked.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/dart.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/powershell.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/verilog.min.js"></script>
</head>

<body>

  <!-- ========== Loading Screen ========== -->
  <div id="loading-screen">
    <div class="loading-title">🚀 网页正在加载/升级中...</div>
    <div class="loading-sub">通常仅需要几秒，马上就好哦~</div>
    <div class="loading-spinner"></div>
  </div>
  <!-- ========== Header ========== -->
  <header>
      <!-- ========== Navigation Bar ========== -->
    <nav class="navbar">
      
      <div class="logo">
        邓万穿
        <button id="settings-toggle" class="settings-toggle">⚙️</button>
        <button id="test-btn" class="test-btn" onclick="test()">🏆测试1</button>
      </div>

      <div id="settings-panel" class="settings-panel">
        <h3>界面定制</h3>
        <hr>
        <div class="setting-item">
            <label>主题主色</label>
            <input type="color" id="primary-picker">
        </div>
        <div class="setting-item">
            <label>字体颜色</label>
            <input type="color" id="text-picker">
        </div>
        <div class="setting-item">
            <label>卡片背景</label>
            <input type="color" id="card-bg-picker">
        </div>
        <div class="setting-item">
            <label>导航栏色</label>
            <input type="color" id="nav-bg-picker">
        </div>
        <button id="reset-theme">恢复默认</button>
      </div>

      <div class="hamburger" onclick="toggleMenu()">☰</div>

      <div class="menu" id="nav-menu">
        <a href="#">首页</a>
        <a href="https://www.bilibili.com/" target="_blank">哔哩哔哩</a>
        <a href="https://github.com/" target="_blank">GitHub</a>
        <a href="https://gemini.google.com/" target="_blank">Gemini</a>
        <a href="https://grok.com/" target="_blank">Grok</a>
        <a href="https://openai.com/chatgpt/" target="_blank">ChatGPT</a>
        <button id="theme-btn" onclick="toggleTheme()">🌙</button>
      </div>
    </nav>          
  </header>
  <!-- ========== Main Content ========== -->
  <main>

    <div class="nav-spacer"></div>

    <!-- Profile -->
    <h1 class="intro-text">欢迎来到我的小宇宙✨</h1>

    <div class="profile-box">
      <img src="https://hatfniprpjrjwzmximna.supabase.co/storage/v1/object/public/notes-images/yovhfm1o7g-1770009135450.webp" alt="我的头像" class="avatar">
    </div>

    <div class="typewriter-text">我叫邓万穿，一名双非保研985的工科研究生，那一年我受奸人陷害，修为尽失，于是提前回了老家开始了我的复仇之路......</div>

    <!-- Honors -->
    <section class="container">
      <h3>🏆 个人荣誉墙</h3>

      <div id="honors-grid" class="honors-grid">
        <p>
          勋章加载中...
        </p>
      </div>
    </section>


    <!-- Notes -->
    <section class="container">
      <h3>📚 学习笔记墙</h3>

      <div class="filter-bar">
        <span class="filter-tag active" onclick="filterNotes('all')">全部</span>
        <span class="filter-tag" onclick="filterNotes('FPGA')">FPGA</span>
        <span class="filter-tag" onclick="filterNotes('Flutter')">Flutter</span>
        <span class="filter-tag" onclick="filterNotes('网站')">网站</span>
        <span class="filter-tag" onclick="filterNotes('陀螺')">陀螺</span>
        <span class="filter-tag" onclick="filterNotes('电路')">电路</span>
        <span class="filter-tag" onclick="filterNotes('日文')">日文</span>
      </div>
      <div class="notes-scroll-window">
        <div id="notes-grid" class="notes-grid"></div>
      </div>
    </section>


    <!-- Daily Logs -->
    <section class="container">
      <h3>📅 日常</h3>
      <div class="notes-scroll-window">
        <div id="daily-grid" class="notes-grid">
          <p>
            正在加载日常记录...
          </p>
        </div>
      </div>
    </section>


    <!-- Tips -->
    <section class="container">
      <h3>💡 小知识 Tips</h3>

      <div class="notes-scroll-window">
        <div id="tips-grid" class="notes-grid">
          <p>
            正在加载小知识 Tips...
          </p>
        </div>
    </section>


    <!-- Comment Section -->
    <section class="container">
      <h3>📬 留言|碎碎念</h3>

      <form onsubmit="addComment(); return false;">
        <input type="text" id="name-input" placeholder="你的名字" required>
        <textarea id="content-input" rows="3" placeholder="想说的话..."></textarea>
        <button type="submit" class="btn btn-blue">发送</button>
      </form>

      <div>
        <h4>💬 留言|碎碎念展示：</h4>

        <div id="comments-container">
        </div>
      </div>
    </section>

    <dialog id="login-dialog" style="padding: 20px; border-radius: 8px; border: 1px solid #ccc;">
      <form id="login-form" method="dialog">
          <h3>管理员认证</h3>
          <input type="email" id="login-email" placeholder="邮箱" required style="display:block; margin-bottom:10px;">
          <input type="password" id="login-password" placeholder="密码" required style="display:block; margin-bottom:10px;">
          <button type="submit" id="confirm-login">登录</button>
          <button type="button" onclick="document.getElementById('login-dialog').close()">取消</button>
      </form>
    </dialog>

    <!-- Thought Section -->
    <section id="thought-section" class="container thought-container">
      <h3>🧠 我的私密想法</h3>

      <textarea id="thought-input" rows="2" placeholder="记录当下的灵感..."></textarea>
      <button onclick="addThought()" class="btn-blue btn-thought">记录想法</button>

      <div id="thoughts-container"></div>
    </section>

    <!-- Admin Panel -->
    <section id="admin-panel" class="container admin-card">

      <div class="admin-header">
        <h3 id="admin-title">🛠️ 内容发布后台</h3>
        <button onclick="logoutAdmin()" class="btn-logout">退出管理 👋</button>
      </div>

      <input type="hidden" id="edit-id">

      <div>
        <label>发布类型：</label>
        <select id="post-type" onchange="toggleFields()">
          <option value="notes">📚 学习笔记</option>
          <option value="daily_logs">📅 日常生活</option>
          <option value="tips">💡 小知识 Tips</option>
          <option value="honors">🏆 个人荣誉</option>
        </select>
      </div>

      <input type="text" id="post-title" placeholder="请输入标题...">

      <div>
        <label>封面图片：</label>

        <input type="file" id="file-upload" accept="image/*" onchange="uploadToStorage()">
        <div id="upload-status" class="upload-status"></div>

        <input type="text" id="post-image" placeholder="封面 URL (上传后自动生成或手动粘贴)...">
      </div>

      <div id="honor-fields" class="honor-fields">
        <input type="text" id="post-issuer" placeholder="颁发机构...">
        <input type="date" id="post-date">
      </div>

      <div id="note-fields" class="note-fields" style="display: none;">
        <!-- <input type="text" id="note-post-category" placeholder="分类 (前端/日文/FPGA)..."> -->
        <select name="note-category" id="note-post-category" required>
          <option value="网站" selected>网站</option>
          <option value="日文">日文</option>
          <option value="Flutter">Flutter</option>
          <option value="FPGA">FPGA</option>
          <option value="电路">电路</option>
          <option value="陀螺">陀螺</option>
        </select>
      </div>

      <div id="tips-fields" class="tips-fields" style="display: none;">
        <input type="text" id="tip-post-category" placeholder="分类">
      </div>

      <div class="editor-toolbar">
        <label for="content-img-upload" class="toolbar-btn">🖼️ 插入正文图片</label>
        <input type="file" id="content-img-upload" accept="image/*" hidden onchange="uploadToContent()">
        
        <label for="md-import-upload" class="toolbar-btn" style="background-color: transparent; color: black;">📥 导入 Markdown</label>
        <input type="file" id="md-import-upload" accept=".md" hidden onchange="importMarkdownFile()">
        
        <span id="content-upload-status" class="upload-status"></span>
      </div>

      <textarea id="post-content" rows="8" placeholder="正文内容 (支持 Markdown)..."></textarea>

      <div class="admin-buttonds">
        <button onclick="submitPost()" id="submit-btn" class="submit-btn submit-button">立即发布</button>
        <button onclick="deletePost()" id="delete-btn" class="submit-btn delete-button">删除</button>
        <button onclick="cancelEdit()" id="cancel-btn" class="submit-btn cancel-button">取消</button>
      </div>
 
    </section>

  </main>


  <!-- ========== Footer ========== -->
  <footer>
    <p>© 2026-2035 邓万穿 😎 | Powered by VS Code</p>
  </footer>


  <!-- ========== Modals ========== -->

  <!-- Note Modal -->
  <div id="note-modal" class="modal-overlay" onclick="handleOverlayClick(event)">
    <div class="modal-content">
      <span class="close-modal" onclick="closeNote()">&times;</span>
      <div id="modal-body"></div>
    </div>
  </div>

  <!-- Image Viewer -->
  <div id="image-viewer" class="image-viewer" onclick="closeImageViewer()">
    <span class="close-viewer">&times;</span>
    <img id="full-image" src="" alt="全屏预览">
  </div>


  <!-- Main Script -->
    <script src="./js/main.js"></script> 

</body>
</html>